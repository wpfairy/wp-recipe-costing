<template>
    <div class="nftn-el-form">
        {{values}}
        <nftn-el-form
            action-grid-slot="3-1"
            v-bind:grid="grid"
            v-bind:inputs="inputs"
            v-bind:rules="rules"
            v-model="values">

            <template slot="grid-0-0">
                替换 grid-0-0
            </template>

            <template slot="grid-0-2">
                <a href="javascript:;" v-on:click="change">change</a>
            </template>

        </nftn-el-form>
        <p>
            <input type="text" v-model="newInput.grid">
            <input type="text" v-model="newInput.label">
            <input type="text" v-model="newInput.name">
            <input type="text" v-model="newInput.type">
            <button v-on:click="add">添加</button>
        </p>
    </div>
</template>

<script>
    import '@/components/element-ui/form';

    export default {
        data () {
            return {
                newInput: {
                    grid: '0-0',
                    label: '',
                    name: '',
                    type: 'text'
                },
                grid: {
                    rows: [
                        [6, 12, 6],
                        [6, 6, 6, 6],
                        [6, 4, 4, 4, 6],
                        [6, 12, 6]
                    ],
                    gap: 15
                },
                inputs: [
                    {
                        label: '测试-1',
                        name: 'test1'
                    },
                    {
                        grid: '0-2',
                        label: '测试-2',
                        name: 'test2'
                    },
                    {
                        grid: '0-2',
                        label: '测试-3',
                        name: 'test3'
                    },
                    {
                        grid: '0-1',
                        span: 12,
                        label: '姓名',
                        name: 'name'
                    },
                    {
                        grid: '0-1',
                        span: 12,
                        label: '出生日期',
                        name: 'birthday',
                        type: 'date'
                    },
                    {
                        grid: '0-1',
                        span: 12,
                        label: '头像',
                        name: 'avatar',
                        type: 'file',
                        ratio: '2:1',
                        // value: 'https://tse4.mm.bing.net/th?id=ORT.TH_470633631&pid=1.12&eid=G.470633631',
                        // value: ['http://v.17llk.com/public/videos/llk_mobile_introduction.mp4', 'https://tse4.mm.bing.net/th?id=ORT.TH_470633631&pid=1.12&eid=G.470633631'],
                        // value: 'http://timg.17llk.com/2c9180825ab89e78015ac6cef7120008/shopServiceItemImage/2017-07-03/2017%3A07%3A03+16%3A04%3A06.jpg',
                        // filePreviewAppend: '@!large',
                        extensions: 'jpg'
                    },
                    {
                        grid: '0-1',
                        span: 12,
                        label: '多文件上传',
                        name: 'files',
                        type: 'file',
                        ratio: '2:1',
                        // value: 'https://tse4.mm.bing.net/th?id=ORT.TH_470633631&pid=1.12&eid=G.470633631',
                        // value: ['http://v.17llk.com/public/videos/llk_mobile_introduction.mp4', 'https://tse4.mm.bing.net/th?id=ORT.TH_470633631&pid=1.12&eid=G.470633631'],
                        // value: 'http://timg.17llk.com/2c9180825ab89e78015ac6cef7120008/shopServiceItemImage/2017-07-03/2017%3A07%3A03+16%3A04%3A06.jpg',
                        // filePreviewAppend: '@!large',
                        extensions: '*',
                        multiple: true,
                        max: 6,
                        fileGrid: { gap: 10, span: 8 },
                        action: 'https://jsonplaceholder.typicode.com/posts/',
                        filePostData: { name: 'bbb' },
                        responseRead: 'id'
                    },
                    {
                        grid: '1-1',
                        label: '性别(含 grid 分离模式)',
                        type: 'radio',
                        name: 'sex',
                        datasource: [{ name: '男', value: 'male' }, { name: '女', value: 'fmale' }]
                    },
                    {
                        grid: '1-2',
                        label: ' ',
                        type: 'radio',
                        name: 'sex',
                        datasource: [{ name: '女', value: 'fmale' }]
                    },
                    {
                        grid: '1-1',
                        label: '技能专长 （分离）',
                        name: 'likes',
                        type: 'checkbox',
                        datasource: [{ name: 'java语言', value: 'java', disabled: true }, { name: 'javascript语言', value: 'js' }]
                    },
                    {
                        grid: '1-2',
                        label: ' ',
                        name: 'likes',
                        type: 'checkbox',
                        min: 1,
                        max: 2,
                        datasource: [{ name: 'java语言', value: 'java' }, { name: 'php语言', value: 'php' }, { name: 'go语言', value: 'go' }]
                    },
                    {
                        grid: '2-1',
                        label: '省份',
                        name: 'province',
                        type: 'select',
                        datasource: [
                            {
                                name: '省-1',
                                value: 'p1',
                                items: [{
                                    name: '城1-1', value: 'c1'
                                }]
                            },
                            {
                                name: '省-2',
                                value: 'p2',
                                items: [
                                    {
                                        name: '城2-1',
                                        value: 'c2-1'
                                    },
                                    {
                                        name: '城2-2',
                                        value: 'c2-2',
                                        districts: [1, 'a', 'b', 4]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        grid: '2-2',
                        label: '城市',
                        name: 'city',
                        type: 'select',
                        datasource: [],
                        cascade: {
                            parent: 'province',
                            key: 'items'
                        },
                        emptyNoPost: true
                    },
                    {
                        grid: '2-3',
                        label: '地区',
                        name: 'district',
                        type: 'select',
                        datasource: [],
                        cascade: {
                            parent: 'city',
                            key: 'districts'
                        }
                    },
                    {
                        grid: '3-1',
                        label: '是否开启日志',
                        name: 'openLog',
                        type: 'switch',
                        value: true
                    },
                    {
                        grid: '3-1',
                        label: '备注',
                        name: 'note',
                        type: 'textarea',
                        rows: 3
                    },
                    {
                        grid: '3-1',
                        label: '自我评分',
                        name: 'score',
                        type: 'slider',
                        min: 0,
                        max: 100,
                        step: 2
                    }
                ],
                values: {
                    name: 'testname',
                    province: 'p2',
                    city: 'c2-2',
                    district: '8',
                    avatar: ['http://v.17llk.com/public/videos/llk_mobile_introduction.mp4', 'https://tse4.mm.bing.net/th?id=ORT.TH_470633631&pid=1.12&eid=G.470633631']
                },
                rules: {
                    // name: { required: true },
                    // likes: { required: true, message: '请选择专长' },
                    // sex: { required: true, message: '请选择性别' }
                }
            };
        },
        methods: {
            change () {
                // this.inputs.filter(input => { return input.name === 'avatar'; })
                //     .forEach(input => {
                //         // console.log(input.ratio);
                //         input.ratio = '3:2';
                //         input.multiple = !input.multiple;
                //         // input.disabled = !input.disabled;
                //         // console.log(input.ratio);
                //     });
                // console.log('nothing happened');
                // this.values.district = '1';
            },
            add () {
                this.inputs.push({
                    grid: this.newInput.grid || '0-0',
                    name: this.newInput.name,
                    label: this.newInput.label,
                    type: this.newInput.type || 'text'
                });

                this.newInput.name = '';
                this.newInput.label = '';
            }
        }
    };
</script>

<style>
    .el-col {
        background-color: #EFF2F7;
        height: 100%;
    }
    .el-col .nftn-el-grid-content {
        min-height: 30px;
        line-height: 30px;
        height: 100%;
        background-color: #E5E9F2;
    }
    .el-col:nth-child(2n+1) .nftn-el-grid-content {
        background-color: #D3DCE6;
    }

    .el-select {
        width: 100%;
    }
</style>
